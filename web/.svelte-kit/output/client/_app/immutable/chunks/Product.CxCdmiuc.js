import"./disclose-version.Bg9kRutz.js";import{c as Lt,p as Xt,l as tt,m as It,o as Ct,v as Zt,t as V,f as Ft,b as R,a as B,s as W,e as $,x as J,k as _,d as te,z as et,u as jt,r as y,aB as Pt,w as ee,g as N,aI as re}from"./custom-element.DQtPqtwV.js";import{i as rt}from"./if.BrBjDjp-.js";import{e as Mt,i as Wt}from"./each.CBDd4fNw.js";import{a as at,s as ae}from"./attributes.DQACxfmV.js";import{b as se}from"./select.CRhj634H.js";import{i as oe}from"./lifecycle.By80OOUV.js";import{p as st}from"./props.DpOBpuVa.js";import{s as ne,a as mt,b as ie}from"./store.iOtDhSer.js";import{D as le}from"./Dialog.CrNQWnop.js";import{a as ht,d as bt,n as ot,o as At,p as Rt,u as Vt}from"./firebase.ByBy7bFy.js";import{o as ce}from"./index-client.cakr4NJt.js";import{w as de}from"./index.BMbXZGcN.js";import{c as wt}from"./cart-state.D66Ex9__.js";import{z as ue,H as Ot,q as Yt,S as qt,K as nt,Q as fe,A as Dt,a as ct,V as pe,f as xt,U as it,C as ge,Z as dt,g as F,T as lt,W as ve,t as f,h as me,y as he,O as be,N as we,i as ye,Y as K,R as xe,s as _e,j as yt,_ as Et,d as z,k as E,x as $e}from"./index.CRqRBLuz.js";function Se(r){let e,s,l,g,c,t,p,a,n,v,o,m,I,A,j,P,M;return{c(){e=E("svg"),s=E("polygon"),g=E("defs"),c=E("linearGradient"),t=E("stop"),n=E("stop"),m=E("stop"),j=E("stop"),f(s,"points",l=r[3]()),z(s,"fill-rule","nonzero"),f(t,"id","stop1"),f(t,"offset",p=r[0].percent),f(t,"stop-opacity","1"),f(t,"stop-color",a=r[2](r[0])),f(n,"id","stop2"),f(n,"offset",v=r[0].percent),f(n,"stop-opacity","0"),f(n,"stop-color",o=r[2](r[0])),f(m,"id","stop3"),f(m,"offset",I=r[0].percent),f(m,"stop-opacity","1"),f(m,"stop-color",A=r[1].styleEmptyStarColor),f(j,"id","stop4"),f(j,"offset","100%"),f(j,"stop-opacity","1"),f(j,"stop-color",P=r[1].styleEmptyStarColor),f(c,"id",M="gradient"+r[0].raw),f(e,"class","star-svg"),z(e,"fill","url(#gradient"+r[0].raw+")"),z(e,"height",r[1].styleStarWidth),z(e,"width",r[1].styleStarWidth)},m(h,w){dt(h,e,w),F(e,s),F(e,g),F(g,c),F(c,t),F(c,n),F(c,m),F(c,j)},p(h,[w]){w&8&&l!==(l=h[3]())&&f(s,"points",l),w&1&&p!==(p=h[0].percent)&&f(t,"offset",p),w&5&&a!==(a=h[2](h[0]))&&f(t,"stop-color",a),w&1&&v!==(v=h[0].percent)&&f(n,"offset",v),w&5&&o!==(o=h[2](h[0]))&&f(n,"stop-color",o),w&1&&I!==(I=h[0].percent)&&f(m,"offset",I),w&2&&A!==(A=h[1].styleEmptyStarColor)&&f(m,"stop-color",A),w&2&&P!==(P=h[1].styleEmptyStarColor)&&f(j,"stop-color",P),w&1&&M!==(M="gradient"+h[0].raw)&&f(c,"id",M),w&1&&z(e,"fill","url(#gradient"+h[0].raw+")"),w&2&&z(e,"height",h[1].styleStarWidth),w&2&&z(e,"width",h[1].styleStarWidth)},i:Et,o:Et,d(h){h&&ct(e)}}}function ke(r,e,s){let{star:l}=e,{style:g}=e,{getFullFillColor:c}=e,{getStarPoints:t}=e;return r.$$set=p=>{"star"in p&&s(0,l=p.star),"style"in p&&s(1,g=p.style),"getFullFillColor"in p&&s(2,c=p.getFullFillColor),"getStarPoints"in p&&s(3,t=p.getStarPoints)},[l,g,c,t]}class Ie extends Ot{constructor(e){super(),Yt(this,e,ke,Se,qt,{star:0,style:1,getFullFillColor:2,getStarPoints:3})}}function Ce(r){fe(r,"svelte-1b09gnd",".jp-review-stars-container.svelte-1b09gnd:not(:last-child){margin-right:5px;position:relative}.jp-review-stars-rating.svelte-1b09gnd{display:flex;align-items:center}.jp-review-stars-indicator.svelte-1b09gnd{font-size:1rem}")}function zt(r,e,s){const l=r.slice();return l[20]=e[s],l}function Ut(r){let e,s,l,g,c,t,p;s=new Ie({props:{star:r[20],style:r[3],getFullFillColor:r[7],getStarPoints:r[5]}});function a(){return r[10](r[20])}function n(){return r[11](r[20])}function v(){return r[13](r[20])}return{c(){e=lt("button"),xe(s.$$.fragment),f(e,"type","button"),e.disabled=l=!r[1],f(e,"aria-label",g=`Star ${r[20].index}`)},m(o,m){dt(o,e,m),ye(s,e,null),c=!0,t||(p=[K(e,"mouseover",a),K(e,"click",n),K(e,"mouseout",r[12]),K(e,"focus",v),K(e,"blur",r[14])],t=!0)},p(o,m){r=o;const I={};m&16&&(I.star=r[20]),m&8&&(I.style=r[3]),s.$set(I),(!c||m&2&&l!==(l=!r[1]))&&(e.disabled=l),(!c||m&16&&g!==(g=`Star ${r[20].index}`))&&f(e,"aria-label",g)},i(o){c||(it(s.$$.fragment,o),c=!0)},o(o){xt(s.$$.fragment,o),c=!1},d(o){o&&ct(e),be(s),t=!1,we(p)}}}function Bt(r){let e,s,l,g;return{c(){e=lt("div"),s=yt(r[0]),l=yt("/"),g=yt(_t),f(e,"class","jp-review-stars-indicator svelte-1b09gnd")},m(c,t){dt(c,e,t),F(e,s),F(e,l),F(e,g)},p(c,t){t&1&&_e(s,c[0])},d(c){c&&ct(e)}}}function Fe(r){let e,s,l,g,c=Dt(r[4]),t=[];for(let n=0;n<c.length;n+=1)t[n]=Ut(zt(r,c,n));const p=n=>xt(t[n],1,1,()=>{t[n]=null});let a=r[2]&&Bt(r);return{c(){e=lt("div"),s=lt("div");for(let n=0;n<t.length;n+=1)t[n].c();l=ve(),a&&a.c(),f(s,"class","jp-review-stars-rating svelte-1b09gnd"),f(e,"class","jp-review-stars-container svelte-1b09gnd")},m(n,v){dt(n,e,v),F(e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,null);F(s,l),a&&a.m(s,null),g=!0},p(n,[v]){if(v&1018){c=Dt(n[4]);let o;for(o=0;o<c.length;o+=1){const m=zt(n,c,o);t[o]?(t[o].p(m,v),it(t[o],1)):(t[o]=Ut(m),t[o].c(),it(t[o],1),t[o].m(s,l))}for($e(),o=c.length;o<t.length;o+=1)p(o);ge()}n[2]?a?a.p(n,v):(a=Bt(n),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},i(n){if(!g){for(let v=0;v<c.length;v+=1)it(t[v]);g=!0}},o(n){t=t.filter(Boolean);for(let v=0;v<t.length;v+=1)xt(t[v]);g=!1},d(n){n&&ct(e),pe(t,n),a&&a.d()}}}let Q=0,Nt=1,_t=5;function je(r,e,s,l,g){let c=Math.PI/s,t=60,p=s*2,a="";for(let n=0;n<p;n++){let v=n%2==0?g:l,o=r+Math.cos(n*c+t)*v,m=e+Math.sin(n*c+t)*v;a+=o+","+m+" "}return a}function O(r){return r.raw*100+"%"}function Pe(r,e,s){let{value:l=0}=e,{starsInput:g=!0}=e,{indicator:c=!0}=e,{style:t={styleStarWidth:15,styleEmptyStarColor:"#737373",styleFullStarColor:"#ffd219"}}=e,p=[],a=[],n=me();function v(){let i=t.styleStarWidth/2,b=t.styleStarWidth/2,x=5,D=t.styleStarWidth/x,Y=D*2.5;return je(i,b,x,D,Y)}function o(){for(let i=0;i<_t;i++)a.push({raw:Q,percent:Q+"%",index:i+1})}function m(){let i=Math.floor(l);for(let b=0;b<a.length;b++)if(i!==0)s(4,a[b].raw=Nt,a),s(4,a[b].percent=O(a[b]),a),i--;else{let x=Math.round(l%1*10)/10,D=Math.round(x*10)/10;return s(4,a[b].raw=D,a),s(4,a[b].percent=O(a[b]),a)}}function I(i){if(!g)return;a.forEach(x=>{x.raw=Q,x.percent=O(x)});let b=Math.min(Math.floor(i),_t);for(let x=0;x<b;x++)s(4,a[x].raw=Nt,a),s(4,a[x].percent=O(a[x]),a);if(b<i){let x=i-b,D=Math.round(x*10)/10;s(4,a[b].raw=D,a),s(4,a[b].percent=O(a[b]),a)}}function A(){g&&(s(4,a=p.map(i=>({...i,raw:Q,percent:O(i)}))),m())}function j(i){return i.raw!==Q?t.styleFullStarColor:t.styleEmptyStarColor}function P(i){g&&I(i)}function M(i){g&&(s(0,l=i),n("rating",i))}he(()=>{o(),m(),p=a});const h=i=>P(i.index),w=i=>M(i.index),G=()=>A(),ut=i=>P(i.index),T=()=>A();return r.$$set=i=>{"value"in i&&s(0,l=i.value),"starsInput"in i&&s(1,g=i.starsInput),"indicator"in i&&s(2,c=i.indicator),"style"in i&&s(3,t=i.style)},[l,g,c,t,a,v,A,j,P,M,h,w,G,ut,T]}class Me extends Ot{constructor(e){super(),Yt(this,e,Pe,Fe,qt,{value:0,starsInput:1,indicator:2,style:3},Ce)}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),nt()}get starsInput(){return this.$$.ctx[1]}set starsInput(e){this.$$set({starsInput:e}),nt()}get indicator(){return this.$$.ctx[2]}set indicator(e){this.$$set({indicator:e}),nt()}get style(){return this.$$.ctx[3]}set style(e){this.$$set({style:e}),nt()}}try{customElements.define("jp-review-stars",ue(Me,{value:{},starsInput:{type:"Boolean"},indicator:{type:"Boolean"},style:{}},[],[],!1))}catch{}var We=V('<img class="w-full h-[200px] rounded-t-lg" alt="product image">'),Ae=V('<img class="w-full h-[200px] rounded-t-lg" src="/images/dummy-img.jpg" alt="default image">'),Re=V("<option> </option>"),Ve=V('<select class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"></select>'),De=V('<div class="w-full flex justify-around items-center"><p> </p> <!></div>'),Ee=V('<div class="w-full flex justify-between items-center text-gray-900 dark:text-white"><div class="w-full flex justify-between items-center" style="flex-direction: column"></div></div>'),ze=V('<button class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Add to cart</button>'),Ue=V('<button class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Remove</button>'),Be=V('<div class="w-full text-center"><h1> </h1></div> <div class="flex w-full justify-center"><button class="bg-red-700 p-4 text-white rounded-lg mr-[10px]">Yes</button> <button class="bg-black text-white rounded-lg p-4">Cancel</button></div>',1),Ne=V('<div class="w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"><a><!> <div class="w-full z-10 relative"><jp-review-stars></jp-review-stars></div></a> <div class="px-5 pb-5"><a><h5 class="text-xl font-semibold tracking-tight text-gray-900 dark:text-white"> </h5></a> <div class="flex items-center justify-start flex-wrap"><span class="text-3xl w-full font-bold text-gray-900 dark:text-white"> </span> <span class="text-1xl w-full text-gray-900 dark:text-white"> </span> <!> <div class="w-full flex justify-between items-center text-gray-900 dark:text-white"><!></div> <img class="cursor-pointer transition-opacity duration-300 hover:opacity-80" alt="Favorite" width="35px" height="35px"></div></div></div> <!>',3);function Oe(r,e){Xt(e,!1);const s=ne(),l=()=>mt(Vt,"$user",s),g=()=>mt(m,"$isFavoriteStore",s),c=()=>mt(wt,"$cartState",s);let t=st(e,"product",12),p=st(e,"userId",12),a=st(e,"price",28,()=>t().price),n=st(e,"showAdd",12,!0),v=It(!1),o=It({});const m=de(!1);ce(()=>{t().variants&&tt(o,t().variants.reduce((d,u)=>(t().selectedVariant&&t().selectedVariant[u.name]?d[u.name]=t().selectedVariant[u.name]:d[u.name]=u.options[0],d),{}))});async function I(){const d=ht(bt,"customers",p());let u=g();if(u){console.log("Removing product from user favorites in the database:",p(),t().id),await ot(d,{favorites:Rt(t().id)});const C=(l().favorites||[]).findIndex(k=>k===t().id);C!==-1&&l().favorites.splice(C,1)}else console.log("Adding product to user favorites in the database:",p(),t().id),await ot(d,{favorites:At(t().id)}),ie(Vt,jt(l).favorites=[...l().favorites||[],t().id],jt(l));m.set(!u)}function A(){const d=ht(bt,"customers",p()),u=c();if(u.find(S=>S.id===t().id))return;const k=[...u,{...t(),selectedVariant:_(o)}];wt.set(k),ot(d,{cartItems:At(t().id),cartUpdate:Date.now()}).then(),localStorage.setItem("cart",JSON.stringify({cartItems:k.map(S=>({id:S.id,selectedVariant:S.selectedVariant})),cartUpdate:Date.now()}))}function j(){const d=ht(bt,"customers",p()),u=c(),C=u.findIndex(k=>k.id===t().id);C!==-1&&(u.splice(C,1),wt.set(u),ot(d,{cartItems:Rt(t().id),cartUpdate:Date.now()}).then(),localStorage.setItem("cart",JSON.stringify({cartItems:u.map(k=>k.id),cartUpdate:Date.now()})))}Ct(()=>(l(),Pt(t())),()=>{var d,u;p(l()?l().id:null),(d=l())!=null&&d.favorites&&((u=l())!=null&&u.favorites.includes(t().id))?m.set(!0):m.set(!1)}),Ct(()=>(Pt(t()),_(o)),()=>{const d=t().variantCombinations?t().variantCombinations.find(u=>u.variant===Object.values(_(o)).join("-")):null;a(d?d.price:t().price)}),Zt(),oe();var P=Ne(),M=Ft(P),h=$(M),w=$(h);rt(w,()=>t().gallery&&t().gallery.length>0,d=>{var u=We();B(()=>at(u,"src",t().gallery[0])),R(d,u)},d=>{var u=Ae();R(d,u)});var G=W(w,2),ut=$(G);y(G),y(h);var T=W(h,2),i=$(T),b=$(i),x=$(b);y(b),y(i);var D=W(i,2),Y=$(D),Ht=$(Y);y(Y);var ft=W(Y,2),Jt=$(ft);y(ft);var $t=W(ft,2);rt($t,()=>t().variants,d=>{var u=Ee(),C=$(u);Mt(C,5,()=>t().variants,Wt,(k,S)=>{var q=De(),U=$(q),L=$(U);y(U);var gt=W(U,2);rt(gt,()=>_(S).options,Gt=>{var X=Ve();B(()=>{_(o)[_(S).name],ee(()=>{_(S)})}),Mt(X,5,()=>_(S).options,Wt,(vt,Z)=>{var H=Re(),kt={},Tt=$(H);y(H),B(()=>{kt!==(kt=_(Z))&&(H.value=(H.__value=_(Z))==null?"":_(Z)),N(Tt,_(Z))}),R(vt,H)}),y(X),se(X,()=>_(o)[_(S).name],vt=>re(o,_(o)[_(S).name]=vt)),R(Gt,X)}),y(q),B(()=>N(L,_(S).name)),R(k,q)}),y(C),y(u),R(d,u)});var pt=W($t,2),Kt=$(pt);rt(Kt,n,d=>{var u=ze();J("click",u,A),R(d,u)},d=>{var u=Ue();J("click",u,()=>{tt(v,!0)}),R(d,u)}),y(pt);var St=W(pt,2);y(D),y(T),y(M);var Qt=W(M,2);return le(Qt,{get showing(){return _(v)},set showing(d){tt(v,d)},children:(d,u)=>{var C=Be(),k=Ft(C),S=$(k),q=$(S);y(S),y(k);var U=W(k,2),L=$(U),gt=W(L,2);y(U),B(()=>N(q,`Remove ${t().name??""}`)),J("click",L,j),J("click",gt,()=>{tt(v,!1)}),R(d,C)},$$slots:{default:!0},$$legacy:!0}),B(()=>{at(h,"href",`/shop/${t().id??""}`),ae(ut,"value",t().averageRating),at(i,"href",`/shop/${t().id??""}`),N(x,t().name||""),N(Ht,`$${(a()||"")??""}`),N(Jt,t().shortDescription||""),at(St,"src",g()?"/images/favorites.svg":"/images/favorites-unselected.svg")}),J("click",St,I),R(r,P),te({get product(){return t()},set product(d){t(d),et()},get userId(){return p()},set userId(d){p(d),et()},get price(){return a()},set price(d){a(d),et()},get showAdd(){return n()},set showAdd(d){n(d),et()}})}Lt(Oe,{product:{},userId:{},price:{},showAdd:{type:"Boolean"}},[],[],!0);export{Oe as P};
